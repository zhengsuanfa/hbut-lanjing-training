# ğŸ“˜ Supabase é…ç½®æŒ‡å—

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨åœ¨ Supabase ä¸­è®¾ç½®æ•°æ®åº“ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤ 1: è®¿é—® Supabase

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€: [https://supabase.com](https://supabase.com)

### æ­¥éª¤ 2: åˆ›å»ºè´¦å·ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰

1. ç‚¹å‡»å³ä¸Šè§’çš„ **Sign Up**
2. ä½¿ç”¨ GitHub è´¦å·æˆ–é‚®ç®±æ³¨å†Œ

### æ­¥éª¤ 3: è¿›å…¥æ‚¨çš„é¡¹ç›®

é¡¹ç›®å·²ç»åˆ›å»ºå¥½äº†ï¼š
- **Project URL**: `https://wftgrambumrqthvaxaca.supabase.co`

### æ­¥éª¤ 4: åˆ›å»ºæ•°æ®è¡¨

#### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ SQL ç¼–è¾‘å™¨ï¼ˆæ¨èï¼‰

1. åœ¨å·¦ä¾§èœå•ä¸­ï¼Œç‚¹å‡» **SQL Editor**
2. ç‚¹å‡» **New Query**
3. å¤åˆ¶é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `supabase-setup.sql` æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹
4. ç²˜è´´åˆ° SQL ç¼–è¾‘å™¨ä¸­
5. ç‚¹å‡»å³ä¸‹è§’çš„ **Run** æŒ‰é’®
6. çœ‹åˆ° "Success. No rows returned" å°±è¯´æ˜æˆåŠŸäº†ï¼

#### æ–¹æ³•äºŒï¼šä½¿ç”¨è¡¨æ ¼ç¼–è¾‘å™¨

1. åœ¨å·¦ä¾§èœå•ä¸­ï¼Œç‚¹å‡» **Table Editor**
2. ç‚¹å‡» **New table**
3. å¡«å†™è¡¨å: `trainings`
4. å‹¾é€‰ **Enable Row Level Security (RLS)**
5. æ·»åŠ ä»¥ä¸‹åˆ—ï¼š

| åˆ—å | ç±»å‹ | é»˜è®¤å€¼ | å¯ç©º | ä¸»é”® |
|------|------|--------|------|------|
| id | uuid | `gen_random_uuid()` | âŒ | âœ… |
| title | text | - | âŒ | âŒ |
| date | text | - | âŒ | âŒ |
| lecturer | text | - | âŒ | âŒ |
| content | text | - | âŒ | âŒ |
| recording_url | text | - | âœ… | âŒ |
| created_at | timestamptz | `now()` | âŒ | âŒ |

6. ç‚¹å‡» **Save** ä¿å­˜è¡¨

### æ­¥éª¤ 5: é…ç½® RLS ç­–ç•¥ï¼ˆRow Level Securityï¼‰

è¿™ä¸€æ­¥å¾ˆé‡è¦ï¼Œå¦åˆ™æ— æ³•è®¿é—®æ•°æ®ï¼

1. åœ¨ **Table Editor** ä¸­ï¼Œæ‰¾åˆ° `trainings` è¡¨
2. ç‚¹å‡»è¡¨åå³ä¾§çš„ **...** æŒ‰é’®
3. é€‰æ‹© **View policies**
4. ç‚¹å‡» **New Policy**
5. é€‰æ‹© **Get started quickly** æ¨¡æ¿
6. é€‰æ‹© **Enable read access to everyone**
7. ç‚¹å‡» **Review**ï¼Œç„¶åç‚¹å‡» **Save policy**

8. å†æ¬¡ç‚¹å‡» **New Policy**
9. é€‰æ‹© **Enable insert for authenticated users only**
10. å°† SQL ä¸­çš„ `(auth.role() = 'authenticated')` æ”¹ä¸º `true`
11. ç‚¹å‡» **Review**ï¼Œç„¶åç‚¹å‡» **Save policy**

12. é‡å¤æ­¥éª¤ 8-11ï¼Œåˆ›å»º **Update** å’Œ **Delete** ç­–ç•¥

**æˆ–è€…æ›´ç®€å•çš„æ–¹æ³•ï¼š**

åœ¨ SQL Editor ä¸­è¿è¡Œï¼š

```sql
-- å…è®¸æ‰€æœ‰æ“ä½œ
CREATE POLICY "å…è®¸æ‰€æœ‰æ“ä½œ" ON trainings
  FOR ALL
  USING (true)
  WITH CHECK (true);
```

## âœ… éªŒè¯é…ç½®

### æµ‹è¯•æ•°æ®åº“è¿æ¥

1. åˆ·æ–°æ‚¨çš„ç½‘ç«™ (`http://localhost:3000`)
2. åº”è¯¥çœ‹åˆ° "åŠ è½½ä¸­..." ç„¶åæ˜¾ç¤ºç©ºç™½åˆ—è¡¨ï¼ˆæˆ–ç¤ºä¾‹æ•°æ®ï¼‰
3. è¿›å…¥ç®¡ç†åå° (`/#/admin`)
4. è¾“å…¥å¯†ç : `lanjing2025`
5. å°è¯•æ·»åŠ ä¸€æ¡åŸ¹è®­è®°å½•
6. å¦‚æœæˆåŠŸä¿å­˜ï¼Œè¯´æ˜é…ç½®å®Œæˆï¼ ğŸ‰

### å¸¸è§é—®é¢˜

#### é—®é¢˜ 1: ç½‘é¡µä¸€ç›´æ˜¾ç¤º"åŠ è½½ä¸­..."

**è§£å†³æ–¹æ³•ï¼š**
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰æ˜¯å¦æœ‰é”™è¯¯
- ç¡®è®¤ `trainings` è¡¨å·²ç»åˆ›å»º
- ç¡®è®¤ RLS ç­–ç•¥å·²é…ç½®

#### é—®é¢˜ 2: ä¿å­˜æ•°æ®æ—¶æç¤º"ä¿å­˜å¤±è´¥"

**è§£å†³æ–¹æ³•ï¼š**
- ç¡®è®¤ RLS ç­–ç•¥å…è®¸æ’å…¥æ“ä½œ
- åœ¨ Supabase çš„ **Table Editor** ä¸­ï¼Œç‚¹å‡» `trainings` è¡¨
- ç‚¹å‡» **RLS** æ ‡ç­¾ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰ç­–ç•¥

#### é—®é¢˜ 3: æ— æ³•æŸ¥çœ‹æ•°æ®

**è§£å†³æ–¹æ³•ï¼š**
- ç¡®è®¤ RLS ç­–ç•¥å…è®¸è¯»å–æ“ä½œ
- å¯ä»¥æš‚æ—¶ç¦ç”¨ RLS è¿›è¡Œæµ‹è¯•ï¼š
  ```sql
  ALTER TABLE trainings DISABLE ROW LEVEL SECURITY;
  ```

## ğŸ“Š æŸ¥çœ‹æ•°æ®

åœ¨ Supabase ä¸­æŸ¥çœ‹å­˜å‚¨çš„æ•°æ®ï¼š

1. è¿›å…¥ **Table Editor**
2. ç‚¹å‡» `trainings` è¡¨
3. å¯ä»¥çœ‹åˆ°æ‰€æœ‰åŸ¹è®­è®°å½•

## ğŸ” API å¯†é’¥è¯´æ˜

é¡¹ç›®å·²é…ç½®ï¼š
- **Project URL**: `https://wftgrambumrqthvaxaca.supabase.co`
- **Anon Key**: å·²å†…ç½®åœ¨ä»£ç ä¸­ï¼ˆå…¬å¼€çš„ API Keyï¼Œå®‰å…¨ï¼‰

**æ³¨æ„**ï¼šanon key æ˜¯å…¬å¼€çš„ï¼Œç”¨äºå®¢æˆ·ç«¯è®¿é—®ã€‚çœŸæ­£çš„å®‰å…¨æ€§ç”± RLS ç­–ç•¥ä¿è¯ã€‚

## ğŸ¯ ä¸‹ä¸€æ­¥

- âœ… æ•°æ®å·²ç»å¯ä»¥äº‘ç«¯ä¿å­˜
- âœ… åˆ·æ–°é¡µé¢ä¸ä¼šä¸¢å¤±æ•°æ®
- âœ… å¤šè®¾å¤‡å¯ä»¥åŒæ­¥æ•°æ®
- âœ… Supabase è‡ªåŠ¨å¤‡ä»½æ•°æ®

äº«å—æ‚¨çš„åŸ¹è®­è®°å½•ç®¡ç†ç³»ç»Ÿå§ï¼ ğŸ‰

---

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- [Supabase å®˜æ–¹æ–‡æ¡£](https://supabase.com/docs)
- [é¡¹ç›® README](./README.md)

